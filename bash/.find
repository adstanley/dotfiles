#!/usr/bin/env bash
# Search all datasets

#@begin_function find_all
function find_all() {
	handle_help "$@" && return 0

	if [ "$HOSTNAME" == "ix-truenas" ]; then
		find /mnt/toshiba /mnt/toshiba2 /mnt/toshiba3 /mnt/toshiba4 /mnt/spool /mnt/spool-temp /mnt/mach2 /mnt/seagatemirror -not -path "*/Incomplete/*" -type d -iname "*$1*"
	elif [ "$HOSTNAME" == "truenas2" ]; then
		find /mnt/z2pool/Pr0n /mnt/z2pool/Pr0n.Datasets /mnt/zpool/Pr0n -type d -iname "*$1*"
	else
		echo "This function is only available on ix-truenas and truenas2"
		return 1
	fi
}
#@end_function

#@begin_function findd
function findd() {
	handle_help "$@" && return 0

	printf "Searching for *%s*. \n" "$1"
	find -- * -iname "*$1*" -type d
}
#@end_function

#@begin_function findf
function findf() {
	handle_help "$@" && return 0

	printf "Searching for *%s*. \n" "$1"
	find -- * -iname "*$1*" -type f
}
#@end_function

# Function to find largest files in the current directory
#@begin_function find_largest_files
function find_largest_files() {
	handle_help "$@" && return 0

	du -h -x -s -- * | sort -r -h | head -20
}
#@end_function
